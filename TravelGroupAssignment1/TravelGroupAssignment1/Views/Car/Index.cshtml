@model List<Car>
@{
    ViewData["Title"] = "List of Cars";
    string? searchLocation = ViewBag.Location as string;
    DateTime searchStartDate = ViewBag.StartDate != null ? ViewBag.StartDate : DateTime.Now;
    DateTime searchEndDate = ViewBag.EndDate != null ? ViewBag.EndDate : DateTime.Now.AddDays(2);
    bool searchValid = ViewBag.SearchValid != null? ViewBag.SearchValid : false;
}

<h2>@ViewData["Title"]</h2>

@if (Model.Any()) 
{
    <!-- Car Card -->
    <div class="row">
        @foreach (var car in Model)
        {
            <div class="col-12 col-sm-4">
                <div class="card" style="width: 18rem;">
                    <a asp-action="Details" asp-route-carId="@car.CarId" class="card-link">
                        <img id="@car.CarId" src="https://www.kbb.com/wp-content/uploads/2022/10/2023-toyota-rav4-prime-frt-3qtr.jpg?w=918" class="card-img-top" alt="Car" style="width: 100%; height: 100%;">
                        <div class="card-body">
                            <h5 class="card-title">@car.Make @car.Model</h5>
                        </div>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">
                                <i class="fa-solid fa-user-group"></i> @car.MaxPassengers
                            </li>
                            <li class="list-group-item">
                                <i class="fa-solid fa-code-branch"></i> @car.Transmission
                            </li>
                            <li class="list-group-item">
                                @if (car.HasAirConditioning)
                                {
                                    <i class="fa-solid fa-fan"></i> <span>Air Conditioner</span>

                                }
                                else
                                {
                                    <i class="fa-solid fa-fan"></i> <span>No Air Conditioner</span>
                                }
                            </li>
                            <li class="list-group-item">
                                <i class="fa-solid fa-globe"></i> Model @car.Model
                            </li>
                            <li class="list-group-item">
                                @if (car.HasUnlimitedMileage)
                                {
                                    <i class="fa-solid fa-gauge-high"></i> <span>Unlimited Mileage</span>
                                    
                                }
                                else
                                {
                                    <i class="fa-solid fa-gauge-high"></i> <span>Limited Mileage</span>
                                }
                            </li>
                            <li class="list-group-item">
                                <i class="fa-solid fa-building"></i> @(car.Company == null ? "None" : car.Company.CompanyName)
                            </li>
                            <li class="list-group-item">
                                <i class="fa-solid fa-tag"></i> $@car.PricePerDay
                            </li>
                        </ul>
                        <a asp-controller="CarBooking" asp-action="Create" asp-route-carId="@car.CarId" asp-route-startDate="@searchStartDate.ToString("yyyy-MM-dd")" asp-route-endDate="@searchEndDate.ToString("yyyy-MM-dd")" class="btn btn.sm btn-primary" role="button">Booking</a>
                    </a>
                </div>
            </div>
@*             <script>
                (async () => {
                    const topic = 'car';
                    const accessKey = 'WOgcw4SyGE-wP7k667o8j0Z3wgySWFLIaSr89ZOUkM4';

                    // Make API request to fetch random image by topic for this hotel
                    const response = await fetch(`https://api.unsplash.com/photos/random?query=${topic}&client_id=${accessKey}`);
                    const data = await response.json();
                    const imageUrl = data.urls.regular;

                    // Set the image src attribute dynamically for this hotel
                    document.getElementById('@car.CarId').src = imageUrl;
                })();
            </script> *@
        }
    </div>
}
else
{
    <p>No cars available</p>
}



